%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   CONCRETE TEMPLATE         %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

//DisplayModule_Flip_RightImage 1
LcmsDataReader_CreateSurveyFile                          1

%%%%%%%%%%%                  CONCRETE JOINTS                   %%%%%%%%%%%% 
% NOTE: CrackingModule_AutoPavementTypeDetection must be set to 1 to activate this module.

JointDetectorModule_FaultingOnLongitudinalJoint   1             %% Default = 1 (enabled). detect Faulting on Longitudinal Joints. Useful for Airfields.
JointModule_EvalPositionDistance_mm		500	%% This parameter specifies the interval between the successive faulting measurements on a transverse joint.
JointModule_MeasurementDistance_mm		300	%% This parameter specifies the distance between two measured points on either side of a transverse joint.
JointModule_AveragingWindowWidth_mm		200	%% This parameter specifies the average width of the transversal windows in which the library get sampling data points to measure the faulting.
JointDetectorModule_MinLength_mm_Longi		1500	%% The minimal length for longitudinal joints. Shorter joints are removed from the list of results.
JointDetectorModule_MinLength_mm_Trans		200	%% The minimal length for transversal joints. Shorter joints are removed from the list of results.
JointDetectorModule_MinJointAngle_degree_Trans	-25  	%%  These two parameters define the angle limits for a joint to be considered transversal. 0 degree means a perfectly transversal (horizontal) joint.
JointDetectorModule_MaxJointAngle_degree_Trans  25	%%
JointDetectorModule_MinJointAngle_degree_Longi  60	%% These two parameters define the angle limits for a joint to be considered longitudinal. 90 degrees means a perfectly longitudinal (vertical) joint.
JointDetectorModule_MaxJointAngle_degree_Longi	120	%% 
JointDetectorModule_MinPercent_Trans_Int	48	%% These two parameters define the minimum confidence level (in percentage) for the transversal joint detection in the intensity and the range respectively. These parameters will determine whether the detected candidate can be considered as a transversal joint.
JointDetectorModule_MinPercent_Trans_Rng	55	%% 
JointDetectorModule_Validate_Int_Rng_OR_vs_AND 1         %% Default value : 0; the joint validation : RngPercentage AND/OR IntPercentage
JointDetectorModule_MinPercent_Longi_Int         50      %% These two parameters define the minimum confidence level (in percentage) for the Longitudinal joint detection in the intensity and the range respectively. These parameters will determine whether the detected candidate can be considered as a longitudinal joint.
JointDetectorModule_MinPercent_Longi_Rng         50
JointDetectorModule_DetectOnlyTransOrLongJoint  0	%% 0: Detecting transversal AND longitudinal joints. 1: Detecting transversal joints only. 2: Detecting longitudinal joints only.

%JointDetectorModule_ValidateJoint 0
%JointDetectorModule_UseOnlyRangeData 0  

%New From Pavemetrics - 26/6 %
JointDetectorModule_DetectOnMergedImage 1
JointDetectorModule_Ransac_Nb_Iteration    4500

%New From Pavemetrics - 28/10 %
JointDetectorModule_ThreshDistAfter_mm  100 % Default = 100. new from PM 28/10/2023


%%%%%%%%%%%                  BAD SEALANT                   %%%%%%%%%%%% 
JointDetectorModule_DetectBadSealantEnable  	1   	%% Enable detect bad sealant
JointBadSealantDetectorModule_MedianPercent         90  % Default = 0.25
JointBadSealantDetectorModule_OffsetFromMedianDepth_mm    5   % default = 5.0



%%%%%%%%%%%%           PICK OUTS                 %%%%%%%%%%%%%%
DefectDetectModule_CrkLowDepthThres  0.9            %   Default: 2.0
PickOutModule_MinPickOutArea_cm2      0.25              %   Default = 0.75  The minimum area of a stone to be considered as a pick out, in centimeter square.
PickOutModule_MaxPickOutArea_cm2     100              % Default = 7   The maximum area of a stone to be considered as a pick out, in centimeter square.
PickOutModule_SavePerimeter        1               %% Default = 1 (enabled)    The perimeter of the individual pick out is not saved in the XML file when this parameter is set to 0 (disable). In this case, only the area and the bounding box will be saved in the XML file. It also means that the pick outs won't be displayed in the output images even though the display if enabled for pick outs.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%          GENERAL           %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
GeneralParam_ResultImageJpgSaveQuality 		100   	% percent Quality of the JPG result images output by the library
GeneralParam_OverlayImageJpgSaveQuality 	100  	% percent Quality of the JPG results images (overlay)
GeneralParam_ResultImageResolution_mm 	 	2     	% 4 default Min= 1mm (1mm higer resolution images / larger files)
GeneralParam_CentralBandWidth_mm   		750  	% 1000 mm - this affects the roughness wheelpath offset which we want to maintain at 0.75 
GeneralParam_WheelPathWidth_mm			1000	% 750 mm - this affects the roughness wheelpath offset which we want to maintain at 0.75 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    GENERAL IMAGE RENDERING       %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
ResultRenderer_EnableDistanceDisplay		0	% Default = 0. Set the parameter to 1 to display the distance of the current section to the beginning of the acquisition at the lower left corner of the result image,
ResultRenderer_DistanceDisplayOffset_m		0	% Default = 0 m. Set an offset (in meter) for the distance display option. The offset is subtracted from the real distance value stored in .fis files.



%%%%%%%%%%%%%%%       CORNER BREAK   %%%%%%%%%%%%%%
JointDetectorModule_DetectCornerSpallingEnable   1    	%% Enable detect corner spalling
ResultRenderer_ConcreteJointDrawCornerCircleCoeff          300              %% Default = 500 This parameters for the radius of the circle (display purpose)
JointCornerSpalling_BlobFilter_pix2                                        1000             %% Default = 200  Filter out small blobs from corner spalling
JointCornerSpalling_RemoveSpallCorner                                   1        %% Default = 1, remove spalling on corner spalling.
JointCornerSpalling_Radius_mm                                              300       %% Default 500 // define the radius from the corner we use to calculate the corner spalling
JointCornerSpalling_AreaThreshold_mm2                             1000   %% (B)
JointCornerSpalling_SpallCornerRemoveOffset                          85  %% mm    (C)
JointCornerSpalling_BreakAreaRatioThreshold                      0.02    %% (D)
JointCornerSpalling_ExpectedSpallingDepth_mm                   3.5  %%  (E)



%%%%%%%%%%%%%%%       SPALLING       %%%%%%%%%%%%%%%% 
JointDetectorModule_DetectSpallingEnable   	1   	%% Enable detection spalling
JointSpallingDetectorModule_MergeDistant            51              %% Default = 51
JointSpallingDetectorModule_ErodeDistant              5               %% default = 5
JointSpallingDetectorModule_GroupSmallSpalls         1              %% default = 1   // Group small/separated spalling together. By default it will be set to 0
JointSpallingDetectorModule_LowMedianPercent       0.90             %% Default = 0.90     These params for determing the spalling :    joint width at a point > lowmedianpercent*AverageJointWidth + Offset
JointSpallingDetectorModule_OffsetFromMedianWidth_mm   6            %%%% Default = 6 Adjust the minimum depth for detecting Spalling on Corners


%%%%%%%%%%%%%%%%   CRACKING - GENERAL  %%%%%%%%%%%%%
CrackingModule_AutoPavementTypeDetection 	0	% See Section 6.2
CrackingModule_UserDefinedPavementType 		2	% See Section 6.2 
MarkingContourModule_ExcludeCracksOnMarking	1	%1 to remove cracks 0 default
CrackingModule_EnablePavementTransition            1           % Enable-disable the pavement transition detection algorithm. When enabling the pavement transition detection, the algorithm will look for a transition between smooth and rough pavement texture. When a transition is found, the crack detection algorithm will determine the best peak detection threshold on each side of the transition (instead of using a unique peak detection threshold for the whole image). This setting should help getting less false crack detections in presence of pavement transition.
ResultRenderer_EnablePaveTransitionDisplay     0       % Display in overlay the pavement transitions that are detected in the images (parameter CrackingModule_EnablePavementTransition must be enabled)
CrackingModule_WideCracks_mm 			25  	% The maximum width of a crack. Cracks wider than this parameter are removed from the crack list (depends if CrackingModule_FilterDeepANDWideCracks is enabled or not. 
CrackingModule_DeepCracks_mm			25  	% The maximum depth of a crack. Cracks deeper than this parameter are removed from the crack list (depends if CrackingModule_FilterDeepANDWideCracks is enabled or not. 
CrackingModule_FilterDeepANDWideCracks          0   	% Determines if the deep and wide crack filtering is performed using an AND operation (default) or an OR operation. AND means that a crack is removed if both its width and depth are greater than the parameters defined by the user.

LCMS2_CrackingModule_PolyFit_B_Param 	3	% default 4 
LCMS2_CrackingModule_PolyFit_C_Param 	0.3	% default 0.25 
CrackLineFilter_FinalTextureSlopeParam               1.3          %Default value 1,3
CrackLineFilter_PrefilterTextureSlopeParam          2        %Default value: 0.75
CrackLineFilter_FinalTextureOffsetParam_1          -10     %Default value -0.3
CrackLineFilter_PrefilterTextureOffsetParam        0.1   %Default value -0.3


%%%%%%%     CRACKING - CONCRETE SPECIFIC    %%%%%%
CrackingModule_MinCrackLengthConcrete_mm   400       %The minimum length of a crack to be valid for concrete roads, in millimeter. All cracks shorter than this value are not reported in the results.
CrackingModule_MinCrackDepthConcrete_mm    0.8     % The minimum depth of a crack on concrete roads (in millimeter). All cracks that have a depth smaller than this value are not reported in the results. This parameter applies for LCMS-1 and LCMS-2 data.
CrackingModule_MinCrackDepthTinning_mm         1        %The minimum depth of a crack on grooved concrete (in millimeter). All cracks that have a depth smaller than this value are not reported in the results. A special algorithm is implemented for crack detection on grooved (tinned) pavement. Grooves are pre-filtered using a spatial frequency filter that evaluates the distance between the grooves. This parameter applies for LCMS-1 and LCMS-2 data.
CrackingModule_ConcreteCrackwithAI                  0        % new AI model for small cracks


%%%%%%%     CRACKING - GROOVED CONCRETE SPECIFIC    %%%%%%
CrackingModule_TinedThresSlope                       0.6       % Default = 0.6  new from PM - works similar to the Poly B param on other surface types cracking
CrackingModule_TinedThresOffset                     -0.8      % Default = -0.8 new from PM - works similar to the Poly C param on other surface types cracking


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%           RAVELLING  (CONCRETE)      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
RavelingModule_Threshold_cm3_m2             	100 	% 100=default lower number. Test before ever changing! The raveling index threshold used to calculate the <AffectedPercentage> result. Areas with a raveling index higher than this threshold are considered as raveled areas. The same threshold is also used to exclude (avoid) crack detection in raveling areas.Test before ever changing!
RavelingModule_ExcludeCracksOnRav 		1.1	% Indicates if crack detection should be excluded (1) or not (0) over raveled areas. When excluded, all cracks located in an area that has a raveling index higher than parameter RavelingModule_Threshold_cm3_m2 are filtered out.
RavelingModule_Peak_Threshold   		1           % 2.5mm (or higher) is recommended for LFOD mounting height (i.e above 2.5m). The peak detection threshold (in mm) used for detecting missing aggregates. The default value (2.5mm) works well for highly textured (porous) roads. For non-porous road, it may be needed to lower this value.
RavelingModule_AutoPeakThresholdMode		0	% Default 0 (Disabled) - the automatic mode to determine the peak detection threshold for raveling module  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%    RAVELLING IMAGE RENDERING      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
ResultRenderer_EnableRavelingDisplay		1	% Enables the raveling display in the output images. When enabled, the squares will be colored light blue, dark blue or red based on the severity of the raveling index (0=disable, 1=enable).
ResultRenderer_EnableRavelingZoneDisplay	0	% Enables the display of each zone limits (square) used to compute the raveling values. See Figure 40 and Figure 41 for an example. 0: Zone limits are not displayed. 1: All zone limits are displayed (same colors) 2: Only zone limits that are affected with raveling are displayed. Those zone limits are colored depending on the raveling severity.
ResultRenderer_EnableRavelingTextDisplay	0	% Enable-Disable the display of raveling numbers in output images. When enabled, the AVC, RPI or RI values are displayed in each zone (square) used to compute the raveling values. This parameter is considered only if ResultRenderer_EnableRavelingZoneDisplay is set to 1 or 2.
ResultRenderer_RavRate1_cm3_m2			100	% Sets the low threshold for the Raveling Index. This threshold is used only for display purposes only; it does not affect the raveling index values.
ResultRenderer_RavRate2_cm3_m2			150	% Sets the intermediate threshold for the Raveling Index. This threshold is used only for display purposes only; it does not affect the raveling index values.
ResultRenderer_RavRate3_cm3_m2			300	% Sets the high threshold for the Raveling Index. This threshold is used only for display purposes only; it does not affect the raveling index values.

%%%%    RAVELLING _ VERSION 2    %%%%%
RavelingModule_RavelingCoinAlgorithmEnable 1
RavelingModule_Zone_Width_mm 250
RavelingModule_Zone_Height_mm 250
ResultRenderer_RavelingZoneType_RI_AVC_RPI 5
RavelingModule_RavelingCoinDepth_mm 2.50    
RavelingModule_RavelingDiameter_mm 12.0


%%%%%%%%%%%%%                 PATCHES             %%%%%%%%%%%%%
PatchModule_MinBlobArea_m2                        0.01                       %% Default = 0.1   This parameter specifies the minimum area of patch to be detected.
PatchModule_MinDiff_IOSmoothness              0.1                           %% Default = 0.5 The algorithm computes the difference in smoothness index between the surface inside a patch candidate and its surrounding.
PatchModule_MinDiff_IOAverageIntensity           10                             %% Default =20  This is the difference of average intensity between inside and outside boundary of patch candidate.
PatchModule_EnableDetectionOnConcrete            1                        %% Default = 0 This parameter allows to change the mode of patch detection: 0: On Asphalt (default) 1: On Concrete.
PatchModule_MinimumConfidentScore                     0.10                %% Default = 0.35  This parameter specifies the minimum confident score of the patch to be detected.
PatchModule_DetectOutsideLaneLimits                     1                %% Default = 0 This parameter determines whether a patch should be detected or not, according to its position on the road (inside the lane limits, outside the lane limits, or partially inside of the line limits), 0: Patches are detected if they are at least touching the lane limits. (default value) 1: All patches are detected, no matter their position on the road. (inside or outside the lane limits) 2: Patches can be detected if their center is located inside the lane limits. Otherwise, they are not detected. 3: Patches must be located entirely inside the lane limits.
PatchModule_Algorithm                                         1                    %% Default = 1   This parameter defines the algorithm that is used for detecting patches. 0: The patches are detected with the original algorithm (this is the algorithm that was used with versions earlier 4.77.0.0). 1: Patches are detected with the newest algorithm based on neural network. This is the default value.


%%%%%%%%%%%%%             POTHOLES         %%%%%%%%%%%%%%
%PotholeModule_MinWidth_mm         5               %%%% Default = 150mm   This parameter defines the minimum major axis diameter of a pothole so that it can be detected. The default value (150mm) is set according to the "Distress Identification Manual for the Long-Term Pavement Performance Program" published by FHWA (Federal Highway Administration).
%PotholeModule_MaxWidth_mm           750              %%%% Default = 750mm   This parameter defines the diameter of the largest hole that can be detected as a pothole.
%PotholeModule_MinMinorAxisDiameter_mm   5     %%%%% Default = 75mm   This parameter defines the minimum minor axis diameter for a pothole (in mm). Potholes that have a minor axis diameter smaller than this parameter will not be detected.
%PotholeModule_MaxRatioMaxMinAxes      5              %%%%% Default = 4      This parameter defines the maximum ratio between the major and minor axes. Potholes that have a ratio greater than this parameter will not be detected.
%PotholeModule_MinAvgDepth_mm           5               %%%%% Default = 5mm     This parameter defines the minimum average depth of a pothole, in millimeter
%PotholeModule_MinArea_m2               0.001            %%%% Default = 0.005 m2   This parameter defines the minimum area of a pothole, in square meter.
%PotholeModule_MaxAvgInt               300                %%%% Default = 150    This parameter defines the maximum average intensity value of a pothol

PotholeModule_MinWidth_mm                        5         % Default = 150mm   This parameter defines the minimum major axis diameter of a pothole so that it can be detected. The default value (150mm) is set according to the "Distress Identification Manual for the Long-Term Pavement Performance Program" published by FHWA (Federal Highway Administration).
PotholeModule_MaxWidth_mm                      750              % Default = 750mm   This parameter defines the diameter of the largest hole that can be detected as a pothole.
PotholeModule_MinMinorAxisDiameter_mm    5          % This is the main parameter that will allow detect smaller pothole:
PotholeModule_MaxRatioMaxMinAxes      4              % Default = 4      This parameter defines the maximum ratio between the major and minor axes. Potholes that have a ratio greater than this parameter will not be detected.
PotholeModule_MinArea_m2               0.0            %%%% Default = 0.005 m2   This parameter defines the minimum area of a pothole, in square meter.
PotholeModule_MaxAvgInt               300                %%%% Default = 150    This parameter defines the maximum average intensity value of a pothol
PotholeModule_AbsoluteMinWidth                   5         %Default value : 50 
PotholeModule_MinAvgDepth_mm                0             %We must disable the final dilation morphological operation, otherwise, small potholes are simply erased
PotholeModule_MorphoKernel                       0               %Default value : 4


%%%%%%%%%%%              LANE MARKING                  %%%%%%%%%%%%%%%%%%
LaneMarkingModule_Mode     			2 	%  0 = Default for roads. 2 = recommended for Airfields.
LaneMarkingModule_RoadWidth_mm   		4500 	% Default = 3600 mm. 4500 recommended for LFOD configuration (2.5m mounting height)
LaneMarkingModule_RoadMarkingPosOffset_mm	0	% 0 mm  Moves the lane marks toward the center of the road.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%       MARKING CONTOUR        %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
MarkingContourModule_ExcludeCracksOnMarking	1	% Default = 0. Set this parameter to 1 to remove all the cracks that are detected on the markings (
MarkingContourModule_MinArea_m2			0.015	% Default = 0.015. The minimum area (in square meters) for a region to be considered as a marking contour.
MarkingContourModule_MaxArea_m2			25	% Default = 5m. Recommended larger if surveying runways. The maximum area (in square meters) for each individual marking contour.
MarkingContour_MaxDilatationLength 		200	% New Param from Pavemetrics to help with identifying large pavement markings on runways
MarkingContour_NewVersionOption 		0	% New Param from Pavemetrics to help with identifying large pavement markings on runways
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  MARKING CONTOUR IMAGE RENDERING      %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
ResultRenderer_EnableMarkingContourDisplay	1	% Default = 0. Set this parameter to 1 to display the marking contours over the result image.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   CRACK IMAGE RENDERING          %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
ResultRenderer_CrackRenderMinWidth_mm		0	% Default = 0. Cracks with a width smaller than this parameter are not displayed.
ResultRenderer_CrackSeverity0_MaxWidth_mm	2	% Default = 6mm. Maximum width for a very weak crack.
ResultRenderer_CrackSeverity1_MaxWidth_mm	5	% Default = 10mm. Maximum width for a weak crack.
ResultRenderer_CrackSeverity2_MaxWidth_mm	10	% Default = 20mm. Maximum width for a medium crack. Width value over this threshold is major.
ResultRenderer_CrackColorRGB_Sev                     0
ResultRenderer_UseCrackRenderDepth        0                       % Disable = 0, Enable = 1. If enabled crack rendering will be displayed based on the Crack depth, instead of crack width.  
ResultRenderer_CrackSeverity0_MaxDepth_mm   1.75           % Default = 1. Maximum width for a very weak crack
ResultRenderer_CrackSeverity1_MaxDepth_mm   2.5           % Default = 2. Maximum width for a weak crack.
ResultRenderer_CrackSeverity2_MaxDepth_mm   3.5           % Default = 3. Maximum width for a medium crack. Width value over this threshold is major.


% FOR USE IF USED WRONG OVERLAP/ANGLE AT ACQUISITION
GeneralParam_SensorImagesOverlap_pix 		96.6 	% 0 The overlap in pixel used to merge the left and right images together
GeneralParam_ConfigurationAngleDeg 		 6.1	% 5 The configuration angle of the sensor on the vehicle. The default value for this parameter is the value entered at the acquisition level. In case of a mistake, the user may change this value at the processing level.
GeneralParam_ForceGPSDataValid 1
GeneralParam_ReportGpsHeadingXML       1
